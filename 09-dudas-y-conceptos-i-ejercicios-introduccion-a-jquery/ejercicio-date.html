<!--  ---------------------------------------------------------------------------------  -->
<!--  ----------  /curso-jquery-escuela-it.com/  --------------------------------------  -->
<!--  ----------  /09-dudas-y-conceptos-i-ejercicios-introduccion-a-jquery/  ----------  -->
<!--  ----------  /ejercicio-date.html  -----------------------------------------------  -->
<!--  ---------------------------------------------------------------------------------  -->


<!DOCTYPE html>
<html lang="es">

<head>

    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="../../assets/favicon/jquery-favicon-original.ico" type="image/x-icon">
    <title> Ejercicio Date - Clase 9 - Dudas y Conceptos I - Ejercicios Introduccion a jQuery - Curso jQuery escuelaIT
    </title>

    <style>
        
        body {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            margin-bottom: 50px;
            font-family: Arial, Helvetica, sans-serif;
            font-size: 14px;
        }

        .title {
            text-align: center;
        }

        .contenido {
            padding-left: 50px;
            padding-right: 50px;
        }

        p {
            padding: 10px;
        }

        #result {
            width: 100%;
            min-height: 50px;
            line-height: 50px;
            padding-left: 10px;
            text-align: center;
            background-color: rgb(250, 247, 243);
        }

    </style>

</head>

<body>

    <hr>
    <h1 class="title"> Ejercicio Date - Clase 9 - Dudas y Conceptos I - Ejercicios Introduccion a jQuery </h1>
    <hr>

    <pre>

        -----  Ejercício Data  -----
        
        -  Crear una página con varios párrafos.

        -  Al cargar la página se deben guardar en cada uno de los párrafos un dato con el instante actual
           en el que se cargó la página.

        -  Luego, cuando se haga clic en uno de los párrafos se quiere saber el número de numero de segundos
           desde el ultimo clic en ese mismo párrafo. Si es el primer clic, se debe dar el numero de segundos
           desde que se cargó la página. Para mostrar ese número de segundos simplemente envía un mensaje a 
           la consola con console.log().
        
        -  Por si no lo sabes, en JavaScript se utiliza un objeto de la clase Date para el calculo de fechas.
           Lo que pasa es que el timestamp de JavaScript está en milisegundos, por eso para calcular en segundos
           debes dividir por 1000. Para resumir, te doy la función que podrias usar. (Un timestamp generalmente
           es el numero de segundos desde el 1 de enero de 1970).
    </pre>

    <br>
    <hr> <br>

    <div class="contenido">

        <p> Lorem ipsum dolor sit amet, consectetur adipisicing elit. Reprehenderit tempore nostrum inventore debitis error temporibus eos repellendus quo, beatae aliquam, perspiciatis dolore. Dignissimos atque doloribus, adipisci voluptates in ipsa dolore. </p>
        <p> Deleniti incidunt, nostrum nemo assumenda placeat quo in facilis unde. Ratione illo expedita eius laborum. Dolorem, officia! Consequatur ducimus natus, fugit quasi iure consequuntur aperiam error ipsa distinctio voluptatem vero! </p>
        <p> Cumque eligendi, ullam, id itaque adipisci tempora sapiente provident, qui maiores quas deleniti aspernatur! Vitae necessitatibus totam tenetur commodi corporis suscipit maiores quae, incidunt autem, vero praesentium ipsum quam earum. </p>
        <p> Possimus sequi sit ex a, repudiandae, commodi, et amet enim error molestias perspiciatis nisi? Deleniti accusamus repudiandae beatae non eos alias eligendi? Porro soluta odit incidunt consectetur earum non debitis! </p>
        <p> Aut beatae, enim voluptatum illo, tenetur totam alias impedit accusantium obcaecati fugiat minima officia ea excepturi assumenda. Sapiente hic soluta numquam ea! Voluptate ratione beatae quas qui sed, odit reprehenderit. </p>
        <p> Necessitatibus harum sequi at quaerat ipsam accusantium laborum, praesentium, mollitia eum pariatur molestias, culpa atque facere. Quia aliquam voluptas odit, ea nulla facilis, molestiae, beatae repudiandae nobis ad iusto in. </p>
        <p> Totam placeat necessitatibus labore molestias error, natus nisi explicabo sed delectus, quia, maxime magni nulla obcaecati suscipit? Quae commodi repellat vel quidem. Adipisci molestias, animi error, soluta iure voluptas officia. </p>
       
        <div id="result"> 
            <h3> El número de segundos desde el último clic es ..., y el número de párrafo es ... </h3>
        </div>

    </div>

    <br>
    <hr>

    <script 
        src="https://code.jquery.com/jquery-1.11.0.min.js"
        integrity="sha256-spTpc4lvj4dOkKjrGokIrHkJgNA0xMS98Pw9N7ir9oI=" 
        crossorigin="anonymous"
    > </script>

    <script> window.jQuery || document.write('<script src="./jquery-1.11.1.min.js"><\/script>') </script>

    <script>

        function timestampSegundos(){
            const date = new Date();
            return Math.round( date.getTime() / 1000);
        }


        $(function () {

            const jQueryVersion = $.fn.jquery;
            console.warn('jQuery Version:', jQueryVersion);

            //  ------------------------------------------------------------------------------------------------
            //  Guarda el tiempo de carga en la variable instanteActual.
            //  Se almacena este tiempo en cada <p> usando .data("time", instanteActual), 
            //  lo que significa que cada párrafo tiene guardado el momento exacto en que la página se cargó.
            //  ------------------------------------------------------------------------------------------------

            //  -----  guardar el instante actual en mis párrafos  -----
            let instanteActual = timestampSegundos();

            console.log('\ninstante actual:', instanteActual);
            $("p").data("time", instanteActual);



            $("p").on("click", function(){
                
                //  -----  calcular el número de segundos desde el último clic  -----
                //  -----  mostrarlo en consola  -----
                let ahora = timestampSegundos();
                console.log('\nahora:', ahora);
                
                //  -----  this ¿qué contiene aquí?  -----
                //  obtenemos el párrafo clicado y lo convertimos en un objeto jQuery.
                const parrafoPulsado = $(this);

                //  -------------------------------------------------------------------------------
                //  Obtiene el instante del último clic almacenado en .data("time").
                //  Resta ahora - instanteUltimoClic para obtener los segundos transcurridos.
                //  Muestra en consola la información.
                //  -------------------------------------------------------------------------------
                const instanteUltimoClic = parrafoPulsado.data("time");
                let numSegundos = ahora - instanteUltimoClic;
                console.log("El número de segundos desde el último clic es ", numSegundos, " y el párrafo es: ", parrafoPulsado);
                
                //  -----  obtenemos el número de párrafo pulsado  -----
                let numParrafo = parrafoPulsado.index() + 1;
                
                //  -----  mostramos el resultado en el html  -----
                $("#result").html(`<h3> El número de segundos desde el último clic es ${numSegundos}, y el número de párrafo es ${numParrafo} </h3>`);

                //  -----  actualizamos el dato del párrafo para colocar el instante de el último clic (ahora)  -----
                parrafoPulsado.data("time", ahora);

            });

            
        });

    </script>

</body>

</html>
